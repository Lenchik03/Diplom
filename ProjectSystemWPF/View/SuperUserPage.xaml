<Page x:Class="ProjectSystemWPF.View.SuperUserPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:ProjectSystemWPF.View"
      xmlns:m="clr-namespace:ProjectSystemAPI.DTO;assembly=ChatServerDTO"
      xmlns:vm="clr-namespace:ProjectSystemWPF.ViewModel"
      mc:Ignorable="d" 
      d:DesignHeight="750" d:DesignWidth="800"
      DataContext="{Binding superUserVM}"
      Title=""
            TextElement.Foreground="{DynamicResource MaterialDesignBody}"
TextElement.FontWeight="Regular"
TextElement.FontSize="13"
TextOptions.TextFormattingMode="Ideal"
TextOptions.TextRenderingMode="Auto"
Background="{DynamicResource MaterialDesignPaper}"
FontFamily="{DynamicResource MaterialDesignFont}">
    <Page.Resources>
        <vm:SuperUserVM x:Key="superUserVM"/>
        <DataTemplate DataType="{x:Type m:UserDTO}">
            <StackPanel Orientation="Horizontal" >
                <TextBlock Text="{Binding FirstName}" Margin="0,0,5,0"/>
                <TextBlock Text="{Binding LastName}" Margin="0,0,5,0"/>
                <TextBlock Text="{Binding Patronymic}" Margin="0,0,5,0"/>
                <TextBlock Text="{Binding Phone}"/>
            </StackPanel>
        </DataTemplate>
    </Page.Resources>

    <Grid Background="#FFFDC401">
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>

        <ScrollViewer Background="#FFFDC401" BorderThickness="1" BorderBrush="Black">
            <Border BorderBrush="Black" BorderThickness="1" Margin="10" >
                <StackPanel>
                <!--<StackPanel Grid.Column="1" Grid.Row="1">
                    <Label Content="Поиск по ФИО, emai и телефону"/>
                    <TextBox Text="{Binding Search, 
                    UpdateSourceTrigger=PropertyChanged}"/>
                </StackPanel>-->
                    <!--<Button Command="{Binding test}" Content="Test"/>-->
                    <StackPanel x:Name="stack1"  Background="LightYellow">

                    </StackPanel>
                </StackPanel>
            </Border>

        </ScrollViewer>
        <StackPanel Grid.Column="1">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <StackPanel Background="#FFFDC401">
                    <Border BorderBrush="Black" BorderThickness="1" Margin="10,10,10,0">
                        <StackPanel  IsEnabled="{Binding CanEdit}" Background="LightYellow">
                            <Grid Margin="2">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <Button Content="🗘" HorizontalAlignment="Left" Height="25" Width="49" Command="{Binding TransferClick}"/>
                                <Label Content="Сотрудник" HorizontalAlignment="Center" FontSize="15" Grid.ColumnSpan="3"/>
                                <Button Content="🗑" Height="25" Width="49" Margin="5" HorizontalAlignment="Center" Grid.Column="1" Command="{Binding DeleteEmployee}" />
                                <Button Content="✚" Height="25" Width="49" Margin="5" HorizontalAlignment="Left" Grid.Column="2" Command="{Binding NewEmployee}"/>

                            </Grid>
                            <Label Content="Имя"/>
                            <TextBox Text="{Binding Employee.FirstName}" />
                            <Label Content="Фамилия"/>
                            <TextBox Text="{Binding Employee.LastName}" />
                            <Label Content="Отчество"/>
                            <TextBox Text="{Binding Employee.Patronymic}" />
                            <Label Content="Дата рождения"/>
                            <DatePicker SelectedDate="{Binding Employee.Birthday}" Language="ru"/>
                            <!--<TextBox Text="{Binding Employee.Birthday, StringFormat=dd.MM.yyyy}" />-->
                            <Label Content="Эл.почта"/>
                            <TextBox Text="{Binding Employee.Email}" />
                            <Label Content="Номер телефона"/>
                            <TextBox Text="{Binding Employee.Phone}" />
                            <Label Content="Должность"/>
                            <TextBox Text="{Binding Employee.Post}"/>
                            <Button Content="Сохранить" Command="{Binding SaveUser}" Visibility="{Binding Hidden}" Height="25"  Width="110" Margin="7"/>

                        </StackPanel>
                    </Border>
                    <Button Content="✍︎" Command="{Binding CanEditClick}" BorderBrush="Black" Visibility="{Binding HiddenEditUser}" Margin="10,0,10,0"/>
                </StackPanel>
                <StackPanel Grid.Row="1">
                    <Border BorderBrush="Black" BorderThickness="1" Margin="10,10,10,0">
                        <StackPanel IsEnabled="{Binding CanEditDep}" Background="LightYellow"  >
                            <Grid Margin="2">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Label Content="Отдел" HorizontalAlignment="Center" Grid.ColumnSpan="3" FontSize="15" Width="60"/>
                                <Button Content="🗑" Grid.Column="1" Height="25" Width="49" Margin="5" Command="{Binding DeleteDepartment}"/>
                                <Button Content="✚"  VerticalAlignment="Bottom" Height="25" Width="49" Margin="5" Grid.Column="2" Command="{Binding NewDep}"/>
                            </Grid>

                            <Label Content="Название отдела"/>
                            <TextBox Text="{Binding Department.Title}" />
                            <Label Content="Начальник отдела"/>
                            <TextBlock Text="{Binding DepDirector.FIO}"/>
                            <Button Content="Сохранить" Command="{Binding SaveDep}" Visibility="{Binding Hidden}" Height="25"  Width="110" Margin="7"/>
                        </StackPanel>
                    </Border>
                    <Button Content="✍︎" Command="{Binding CanEditDepClick}" BorderBrush="Black" Visibility="{Binding HiddenEditDep}" Margin="10,0,10,0"/>
                </StackPanel>



            </Grid>


        </StackPanel>
    </Grid>
</Page>
